{
  "context": {
    "version": "2.0.0",
    "action": "on_discover",
    "timestamp": "2024-10-04T10:00:05Z",
    "message_id": "msg-on-discover-market-001",
    "transaction_id": "txn-market-energy-001",
    "bap_id": "bap.energy-consumer.com",
    "bap_uri": "https://bap.energy-consumer.com",
    "bpp_id": "bpp.market-clearing-agent.com",
    "bpp_uri": "https://bpp.market-clearing-agent.com",
    "ttl": "PT30S",
    "domain": "energy-trade"
  },
  "message": {
    "catalogs": [
      {
        "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld",
        "@type": "beckn:Catalog",
        "beckn:id": "catalog-market-clearing-001",
        "beckn:descriptor": {
          "@type": "beckn:Descriptor",
          "schema:name": "Market-Based P2P Energy Trading",
          "beckn:shortDesc": "Pay-as-clear pricing with market clearing agent"
        },
        "beckn:offers": [
          {
            "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld",
            "@type": "beckn:Offer",
            "beckn:id": "offer-market-clearing-001",
            "beckn:descriptor": {
              "@type": "beckn:Descriptor",
              "schema:name": "Market Clearing Agent - Pay as Clear"
            },
            "beckn:provider": "bpp.market-clearing-agent.com",
            "beckn:price": {
              "@type": "schema:PriceSpecification",
              "schema:price": 0.0,
              "schema:priceCurrency": "INR",
              "schema:unitText": "kWh",
              "schema:valueAddedTaxIncluded": false
            },
            "beckn:offerAttributes": {
              "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyOffer/v1/context.jsonld",
              "@type": "EnergyOffer",
              "offerId": "offer-market-clearing-001",
              "contractId": "contract-market-p2p-001",
              "providerId": "bpp.market-clearing-agent.com",
              "providerUri": "https://bpp.market-clearing-agent.com",
              "openRole": "PROSUMER",
              "contractSummary": "Market-based P2P trading: MARKET_CLEARING_AGENT coordinates, PROSUMERs provide offer curves, pay-as-clear pricing",
              "contract": {
                "@context": "https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/EnergyContractP2PTrade/v1/context.jsonld",
                "@type": "EnergyContractP2PTrade",
                "contractId": "contract-market-p2p-001",
                "status": "PENDING",
                "createdAt": "2024-10-04T10:00:00Z",
                "roles": [
                  {
                    "role": "MARKET_CLEARING_AGENT",
                    "filledBy": "bpp.market-clearing-agent.com",
                    "filled": true,
                    "roleInputs": {
                      "marketMakingFee": 0.01
                    }
                  },
                  {
                    "role": "PROSUMER",
                    "filledBy": null,
                    "filled": false,
                    "roleInputs": {}
                  }
                ],
                "inputParameters": {
                  "validityWindow": {
                    "startTime": "2024-10-04T00:00:00Z",
                    "endTime": "2024-10-04T23:59:59Z"
                  },
                  "pricingModel": "PAY_AS_CLEAR"
                },
                "inputSignals": [],
                "telemetrySources": [],
                "revenueFlows": {
                  "flows": [
                    {
                      "from": "PROSUMER",
                      "to": "MARKET_CLEARING_AGENT",
                      "formula": "(roles.MARKET_CLEARING_AGENT.roleInputs.clearingPrice + roles.MARKET_CLEARING_AGENT.roleInputs.marketMakingFee) × roles.MARKET_CLEARING_AGENT.roleInputs.clearedPower[PROSUMER.era]",
                      "description": "PROSUMER pays/receives based on clearing price + market making fee × cleared power (positive = receives, negative = pays)"
                    }
                  ],
                  "netZero": true
                },
                "qualityMetrics": {
                  "metrics": []
                }
              }
            }
          }
        ]
      }
    ]
  }
}

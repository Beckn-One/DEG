{
    "info": {
        "_postman_id": "p2p-trading-cds-upload-deg",
        "name": "P2P-Trading-CDSupload-DEG",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "description": "Postman collection for uploading catalog to Catalog Discovery Service (CDS) for P2P Energy Trading"
    },
    "item": [
        {
            "name": "P2P Energy Catalog Publish",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"context\": {\n    \"version\": \"{{version}}\",\n    \"action\": \"catalog_publish\",\n    \"timestamp\": \"{{iso_date}}\",\n    \"message_id\": \"{{$guid}}\",\n    \"transaction_id\": \"{{transaction_id}}\",\n    \"bap_id\": \"{{bap_id}}\",\n    \"bap_uri\": \"{{bap_uri}}\",\n    \"bpp_id\": \"{{bpp_id}}\",\n    \"bpp_uri\": \"{{bpp_uri}}\",\n    \"ttl\": \"PT30S\",\n    \"domain\": \"{{domain}}\"\n  },\n  \"message\": {\n    \"catalogs\": [\n      {\n        \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n        \"@type\": \"beckn:Catalog\",\n        \"beckn:id\": \"catalog-energy-001\",\n        \"beckn:descriptor\": {\n          \"@type\": \"beckn:Descriptor\",\n          \"schema:name\": \"Solar Energy Trading Catalog\"\n        },\n        \"beckn:bppId\": \"{{bpp_id}}\",\n        \"beckn:bppUri\": \"{{bpp_uri}}\",\n        \"beckn:items\": [\n          {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n            \"@type\": \"beckn:Item\",\n            \"beckn:id\": \"energy-resource-solar-001\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"Solar Energy - 30.5 kWh\",\n              \"beckn:shortDesc\": \"Carbon Offset Certified Solar Energy\",\n              \"beckn:longDesc\": \"High-quality solar energy from verified source with carbon offset certification\"\n            },\n            \"beckn:provider\": {\n              \"beckn:id\": \"provider-solar-farm-001\",\n              \"beckn:descriptor\": {\n                \"@type\": \"beckn:Descriptor\",\n                \"schema:name\": \"Solar Farm 001\"\n              }\n            },\n            \"beckn:itemAttributes\": {\n              \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/main/schema/EnergyResource/v0.2/context.jsonld\",\n              \"@type\": \"EnergyResource\",\n              \"sourceType\": \"SOLAR\",\n              \"deliveryMode\": \"GRID_INJECTION\",\n              \"certificationStatus\": \"Carbon Offset Certified\",\n              \"meterId\": \"100200300\",\n              \"inverterId\": \"inv-12345\",\n              \"availableQuantity\": 30.5,\n              \"productionWindow\": {\n                \"start\": \"2024-10-04T10:00:00Z\",\n                \"end\": \"2024-10-04T18:00:00Z\"\n              },\n              \"sourceVerification\": {\n                \"verified\": true,\n                \"verificationDate\": \"2024-09-01T00:00:00Z\",\n                \"certificates\": [\n                  \"https://example.com/certs/solar-panel-cert.pdf\"\n                ]\n              },\n              \"productionAsynchronous\": true\n            }\n          },\n          {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n            \"@type\": \"beckn:Item\",\n            \"beckn:id\": \"energy-resource-solar-002\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"Solar Energy - 50.0 kWh\",\n              \"beckn:shortDesc\": \"Standard Solar Energy\",\n              \"beckn:longDesc\": \"Reliable solar energy from verified source\"\n            },\n            \"beckn:provider\": {\n              \"beckn:id\": \"provider-solar-farm-001\",\n              \"beckn:descriptor\": {\n                \"@type\": \"beckn:Descriptor\",\n                \"schema:name\": \"Solar Farm 001\"\n              }\n            },\n            \"beckn:itemAttributes\": {\n              \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/main/schema/EnergyResource/v0.2/context.jsonld\",\n              \"@type\": \"EnergyResource\",\n              \"sourceType\": \"SOLAR\",\n              \"deliveryMode\": \"GRID_INJECTION\",\n              \"certificationStatus\": \"Standard Certified\",\n              \"meterId\": \"100200301\",\n              \"inverterId\": \"inv-12346\",\n              \"availableQuantity\": 50.0,\n              \"productionWindow\": {\n                \"start\": \"2024-10-04T08:00:00Z\",\n                \"end\": \"2024-10-04T16:00:00Z\"\n              },\n              \"sourceVerification\": {\n                \"verified\": true,\n                \"verificationDate\": \"2024-09-01T00:00:00Z\",\n                \"certificates\": [\n                  \"https://example.com/certs/solar-panel-cert-2.pdf\"\n                ]\n              },\n              \"productionAsynchronous\": true\n            }\n          }\n        ],\n        \"beckn:offers\": [\n          {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n            \"@type\": \"beckn:Offer\",\n            \"beckn:id\": \"offer-energy-001\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"Daily Settlement Solar Energy Offer\"\n            },\n            \"beckn:provider\": \"provider-solar-farm-001\",\n            \"beckn:items\": [\"energy-resource-solar-001\"],\n            \"beckn:price\": {\n              \"@type\": \"schema:PriceSpecification\",\n              \"schema:price\": 0.15,\n              \"schema:priceCurrency\": \"USD\",\n              \"schema:unitText\": \"kWh\"\n            },\n            \"beckn:offerAttributes\": {\n              \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/main/schema/EnergyTradeOffer/v0.2/context.jsonld\",\n              \"@type\": \"EnergyTradeOffer\",\n              \"pricingModel\": \"PER_KWH\",\n              \"settlementType\": \"DAILY\",\n              \"wheelingCharges\": {\n                \"amount\": 2.5,\n                \"currency\": \"USD\",\n                \"description\": \"PG&E Grid Services wheeling charge\"\n              },\n              \"minimumQuantity\": 1.0,\n              \"maximumQuantity\": 100.0,\n              \"validityWindow\": {\n                \"start\": \"2024-10-04T00:00:00Z\",\n                \"end\": \"2024-10-04T23:59:59Z\"\n              }\n            }\n          },\n          {\n            \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/draft/schema/core/v2/context.jsonld\",\n            \"@type\": \"beckn:Offer\",\n            \"beckn:id\": \"offer-energy-002\",\n            \"beckn:descriptor\": {\n              \"@type\": \"beckn:Descriptor\",\n              \"schema:name\": \"Bulk Solar Energy Offer\"\n            },\n            \"beckn:provider\": \"provider-solar-farm-001\",\n            \"beckn:items\": [\"energy-resource-solar-002\"],\n            \"beckn:price\": {\n              \"@type\": \"schema:PriceSpecification\",\n              \"schema:price\": 0.12,\n              \"schema:priceCurrency\": \"USD\",\n              \"schema:unitText\": \"kWh\"\n            },\n            \"beckn:offerAttributes\": {\n              \"@context\": \"https://raw.githubusercontent.com/beckn/protocol-specifications-new/refs/heads/main/schema/EnergyTradeOffer/v0.2/context.jsonld\",\n              \"@type\": \"EnergyTradeOffer\",\n              \"pricingModel\": \"PER_KWH\",\n              \"settlementType\": \"WEEKLY\",\n              \"wheelingCharges\": {\n                \"amount\": 2.0,\n                \"currency\": \"USD\",\n                \"description\": \"PG&E Grid Services wheeling charge\"\n              },\n              \"minimumQuantity\": 10.0,\n              \"maximumQuantity\": 500.0,\n              \"validityWindow\": {\n                \"start\": \"2024-10-04T00:00:00Z\",\n                \"end\": \"2024-10-11T23:59:59Z\"\n              }\n            }\n          }\n        ]\n      }\n    ]\n  }\n}",
                    "options": {
                        "raw": {
                            "language": "json"
                        }
                    }
                },
                "url": {
                    "raw": "{{cds_url}}/beckn/v2/catalog/publish",
                    "host": [
                        "{{cds_url}}"
                    ],
                    "path": [
                        "beckn",
                        "v2",
                        "catalog",
                        "publish"
                    ]
                },
                "description": "Request to publish/upload catalog to CDS."
            },
            "response": []
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Pure JS pre-request script to replace moment()",
                    "",
                    "// 1) ISO 8601 timestamp without needing moment",
                    "const isoTimestamp = new Date().toISOString();",
                    "pm.collectionVariables.set('iso_date', isoTimestamp);"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "domain",
            "value": "beckn.one:deg:p2p-trading:2.0.0"
        },
        {
            "key": "version",
            "value": "2.0.0"
        },
        {
            "key": "bap_id",
            "value": "p2p-trading-sandbox1.com"
        },
        {
            "key": "bap_uri",
            "value": "http://onix-bap:8081/bap/receiver"
        },
        {
            "key": "bpp_id",
            "value": "p2p-trading-sandbox2.com"
        },
        {
            "key": "bpp_uri",
            "value": "http://onix-bpp:8082/bpp/receiver"
        },
        {
            "key": "cds_url",
            "value": "https://34.93.141.21.sslip.io"
        },
        {
            "key": "transaction_id",
            "value": "3769776b-88b4-469d-9ee2-95044fe5dafc"
        },
        {
            "key": "iso_date",
            "value": "2025-12-10T07:49:03.203Z"
        }
    ]
}